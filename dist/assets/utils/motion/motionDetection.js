var createMotionDetectionModule=(()=>{var r="undefined"!=typeof document?document.currentScript?.src:void 0;return"undefined"!=typeof __filename&&(r||=__filename),function(e={}){var n,t,a,o,i,u=e,s=new Promise((r,e)=>{n=r,t=e}),f=Object.assign({},u),c=(r,e)=>{throw e},l="object"==typeof window,d="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,v="";if(p){var m=require("fs"),h=require("path");v=d?h.dirname(v)+"/":__dirname+"/",a=(r,e)=>(r=O(r)?new URL(r):h.normalize(r),m.readFileSync(r,e?void 0:"utf8")),i=r=>{var e=a(r,!0);return e.buffer||(e=new Uint8Array(e)),e},o=(r,e,n,t=!0)=>{r=O(r)?new URL(r):h.normalize(r),m.readFile(r,t?void 0:"utf8",(r,a)=>{r?n(r):e(t?a.buffer:a)})},!u.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c=(r,e)=>{throw process.exitCode=r,e}}else(l||d)&&(d?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),r&&(v=r),v=v.startsWith("blob:")?"":v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1),a=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.send(null),e.responseText},d&&(i=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(r,e,n)=>{var t=new XMLHttpRequest;t.open("GET",r,!0),t.responseType="arraybuffer",t.onload=()=>{200==t.status||0==t.status&&t.response?e(t.response):n()},t.onerror=n,t.send(null)});u.print||console.log.bind(console);var y,g=u.printErr||console.error.bind(console);Object.assign(u,f),f=null,u.arguments&&u.arguments,u.thisProgram&&u.thisProgram,u.quit&&(c=u.quit),u.wasmBinary&&(y=u.wasmBinary);var w,A,b,C,T,P,R,W,E,S=!1,F=[],I=[],k=[],U=[];function _(r){F.unshift(r)}function x(r){U.unshift(r)}var D=0,$=null,H=null;function M(r){u.onAbort?.(r),g(r="Aborted("+r+")"),S=!0,w=1,r+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(r);throw t(e),e}var j,q,B=r=>r.startsWith("data:application/octet-stream;base64,"),O=r=>r.startsWith("file://");function V(r){if(r==j&&y)return new Uint8Array(y);if(i)return i(r);throw"both async and sync fetching of the wasm failed"}function L(r,e,n){return function(r){if(!y&&(l||d)){if("function"==typeof fetch&&!O(r))return fetch(r,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw`failed to load wasm binary file at '${r}'`;return e.arrayBuffer()}).catch(()=>V(r));if(o)return new Promise((e,n)=>{o(r,r=>e(new Uint8Array(r)),n)})}return Promise.resolve().then(()=>V(r))}(r).then(r=>WebAssembly.instantiate(r,e)).then(n,r=>{g(`failed to asynchronously prepare wasm: ${r}`),M(r)})}function z(r){this.name="ExitStatus",this.message=`Program terminated with exit(${r})`,this.status=r}B(j="motionDetection.wasm")||(q=j,j=u.locateFile?u.locateFile(q,v):v+q);var G,X,N=r=>{for(;r.length>0;)r.shift()(u)},J=u.noExitRuntime||!0,K=()=>kr(),Q=r=>{for(var e="",n=r;b[n];)e+=G[b[n++]];return e},Y={},Z={},rr={},er=r=>{throw new X(r)};function nr(r,e,n={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(r,e,n={}){var t=e.name;if(r||er(`type "${t}" must have a positive integer typeid pointer`),Z.hasOwnProperty(r)){if(n.ignoreDuplicateRegistrations)return;er(`Cannot register type '${t}' twice`)}if(Z[r]=e,delete rr[r],Y.hasOwnProperty(r)){var a=Y[r];delete Y[r],a.forEach(r=>r())}}(r,e,n)}var tr=[],ar=[];function or(r){return this.fromWireType(R[r>>2])}var ir={name:"emscripten::val",fromWireType:r=>{var e=(r=>(r||er("Cannot use deleted val. handle = "+r),ar[r]))(r);return(r=>{r>9&&0===--ar[r+1]&&(ar[r]=void 0,tr.push(r))})(r),e},toWireType:(r,e)=>(r=>{switch(r){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const e=tr.pop()||ar.length;return ar[e]=r,ar[e+1]=1,e}}})(e),argPackAdvance:8,readValueFromPointer:or,destructorFunction:null},ur=(r,e)=>{switch(e){case 4:return function(r){return this.fromWireType(W[r>>2])};case 8:return function(r){return this.fromWireType(E[r>>3])};default:throw new TypeError(`invalid float width (${e}): ${r}`)}},sr=(r,e,n)=>{switch(e){case 1:return n?r=>A[r]:r=>b[r];case 2:return n?r=>C[r>>1]:r=>T[r>>1];case 4:return n?r=>P[r>>2]:r=>R[r>>2];default:throw new TypeError(`invalid integer width (${e}): ${r}`)}},fr=(r,e,n)=>((r,e,n,t)=>{if(!(t>0))return 0;for(var a=n,o=n+t-1,i=0;i<r.length;++i){var u=r.charCodeAt(i);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&r.charCodeAt(++i)),u<=127){if(n>=o)break;e[n++]=u}else if(u<=2047){if(n+1>=o)break;e[n++]=192|u>>6,e[n++]=128|63&u}else if(u<=65535){if(n+2>=o)break;e[n++]=224|u>>12,e[n++]=128|u>>6&63,e[n++]=128|63&u}else{if(n+3>=o)break;e[n++]=240|u>>18,e[n++]=128|u>>12&63,e[n++]=128|u>>6&63,e[n++]=128|63&u}}return e[n]=0,n-a})(r,b,e,n),cr=r=>{for(var e=0,n=0;n<r.length;++n){var t=r.charCodeAt(n);t<=127?e++:t<=2047?e+=2:t>=55296&&t<=57343?(e+=4,++n):e+=3}return e},lr="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,dr=(r,e)=>r?((r,e,n)=>{for(var t=e+n,a=e;r[a]&&!(a>=t);)++a;if(a-e>16&&r.buffer&&lr)return lr.decode(r.subarray(e,a));for(var o="";e<a;){var i=r[e++];if(128&i){var u=63&r[e++];if(192!=(224&i)){var s=63&r[e++];if((i=224==(240&i)?(15&i)<<12|u<<6|s:(7&i)<<18|u<<12|s<<6|63&r[e++])<65536)o+=String.fromCharCode(i);else{var f=i-65536;o+=String.fromCharCode(55296|f>>10,56320|1023&f)}}else o+=String.fromCharCode((31&i)<<6|u)}else o+=String.fromCharCode(i)}return o})(b,r,e):"",pr="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,vr=(r,e)=>{for(var n=r,t=n>>1,a=t+e/2;!(t>=a)&&T[t];)++t;if((n=t<<1)-r>32&&pr)return pr.decode(b.subarray(r,n));for(var o="",i=0;!(i>=e/2);++i){var u=C[r+2*i>>1];if(0==u)break;o+=String.fromCharCode(u)}return o},mr=(r,e,n)=>{if(n??=2147483647,n<2)return 0;for(var t=e,a=(n-=2)<2*r.length?n/2:r.length,o=0;o<a;++o){var i=r.charCodeAt(o);C[e>>1]=i,e+=2}return C[e>>1]=0,e-t},hr=r=>2*r.length,yr=(r,e)=>{for(var n=0,t="";!(n>=e/4);){var a=P[r+4*n>>2];if(0==a)break;if(++n,a>=65536){var o=a-65536;t+=String.fromCharCode(55296|o>>10,56320|1023&o)}else t+=String.fromCharCode(a)}return t},gr=(r,e,n)=>{if(n??=2147483647,n<4)return 0;for(var t=e,a=t+n-4,o=0;o<r.length;++o){var i=r.charCodeAt(o);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&r.charCodeAt(++o)),P[e>>2]=i,(e+=4)+4>a)break}return P[e>>2]=0,e-t},wr=r=>{for(var e=0,n=0;n<r.length;++n){var t=r.charCodeAt(n);t>=55296&&t<=57343&&++n,e+=4}return e},Ar=r=>u["_"+r],br=r=>Ir(r),Cr=(r,e,n,t,a)=>{var o={string:r=>{var e=0;return null!=r&&0!==r&&(e=(r=>{var e=cr(r)+1,n=br(e);return fr(r,n,e),n})(r)),e},array:r=>{var e,n,t=br(r.length);return e=r,n=t,A.set(e,n),t}},i=Ar(r),u=[],s=0;if(t)for(var f=0;f<t.length;f++){var c=o[n[f]];c?(0===s&&(s=K()),u[f]=c(t[f])):u[f]=t[f]}var l=i(...u);return function(r){return 0!==s&&Fr(s),function(r){return"string"===e?dr(r):"boolean"===e?Boolean(r):r}(r)}(l)};(()=>{for(var r=new Array(256),e=0;e<256;++e)r[e]=String.fromCharCode(e);G=r})(),X=u.BindingError=class extends Error{constructor(r){super(r),this.name="BindingError"}},u.InternalError=class extends Error{constructor(r){super(r),this.name="InternalError"}},ar.push(0,1,void 0,1,null,1,!0,1,!1,1),u.count_emval_handles=()=>ar.length/2-5-tr.length;var Tr,Pr={i:(r,e,n,t,a)=>{},g:(r,e,n,t)=>{nr(r,{name:e=Q(e),fromWireType:function(r){return!!r},toWireType:function(r,e){return e?n:t},argPackAdvance:8,readValueFromPointer:function(r){return this.fromWireType(b[r])},destructorFunction:null})},f:r=>nr(r,ir),e:(r,e,n)=>{nr(r,{name:e=Q(e),fromWireType:r=>r,toWireType:(r,e)=>e,argPackAdvance:8,readValueFromPointer:ur(e,n),destructorFunction:null})},b:(r,e,n,t,a)=>{e=Q(e),-1===a&&(a=4294967295);var o=r=>r;if(0===t){var i=32-8*n;o=r=>r<<i>>>i}var u=e.includes("unsigned");nr(r,{name:e,fromWireType:o,toWireType:u?function(r,e){return this.name,e>>>0}:function(r,e){return this.name,e},argPackAdvance:8,readValueFromPointer:sr(e,n,0!==t),destructorFunction:null})},a:(r,e,n)=>{var t=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function a(r){var e=R[r>>2],n=R[r+4>>2];return new t(A.buffer,n,e)}nr(r,{name:n=Q(n),fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})},d:(r,e)=>{var n="std::string"===(e=Q(e));nr(r,{name:e,fromWireType(r){var e,t=R[r>>2],a=r+4;if(n)for(var o=a,i=0;i<=t;++i){var u=a+i;if(i==t||0==b[u]){var s=dr(o,u-o);void 0===e?e=s:(e+=String.fromCharCode(0),e+=s),o=u+1}}else{var f=new Array(t);for(i=0;i<t;++i)f[i]=String.fromCharCode(b[a+i]);e=f.join("")}return Sr(r),e},toWireType(r,e){var t;e instanceof ArrayBuffer&&(e=new Uint8Array(e));var a="string"==typeof e;a||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||er("Cannot pass non-string to std::string"),t=n&&a?cr(e):e.length;var o=Er(4+t+1),i=o+4;if(R[o>>2]=t,n&&a)fr(e,i,t+1);else if(a)for(var u=0;u<t;++u){var s=e.charCodeAt(u);s>255&&(Sr(i),er("String has UTF-16 code units that do not fit in 8 bits")),b[i+u]=s}else for(u=0;u<t;++u)b[i+u]=e[u];return null!==r&&r.push(Sr,o),o},argPackAdvance:8,readValueFromPointer:or,destructorFunction(r){Sr(r)}})},c:(r,e,n)=>{var t,a,o,i;n=Q(n),2===e?(t=vr,a=mr,i=hr,o=r=>T[r>>1]):4===e&&(t=yr,a=gr,i=wr,o=r=>R[r>>2]),nr(r,{name:n,fromWireType:r=>{for(var n,a=R[r>>2],i=r+4,u=0;u<=a;++u){var s=r+4+u*e;if(u==a||0==o(s)){var f=t(i,s-i);void 0===n?n=f:(n+=String.fromCharCode(0),n+=f),i=s+e}}return Sr(r),n},toWireType:(r,t)=>{"string"!=typeof t&&er(`Cannot pass non-string to C++ string type ${n}`);var o=i(t),u=Er(4+o+e);return R[u>>2]=o/e,a(t,u+4,o+e),null!==r&&r.push(Sr,u),u},argPackAdvance:8,readValueFromPointer:or,destructorFunction(r){Sr(r)}})},h:(r,e)=>{nr(r,{isVoid:!0,name:e=Q(e),argPackAdvance:0,fromWireType:()=>{},toWireType:(r,e)=>{}})},j:r=>{b.length,M("OOM")}},Rr=function(){var r,e,n,a,o={a:Pr};function i(r,e){var n,t;return Rr=r.exports,n=Rr.k.buffer,u.HEAP8=A=new Int8Array(n),u.HEAP16=C=new Int16Array(n),u.HEAPU8=b=new Uint8Array(n),u.HEAPU16=T=new Uint16Array(n),u.HEAP32=P=new Int32Array(n),u.HEAPU32=R=new Uint32Array(n),u.HEAPF32=W=new Float32Array(n),u.HEAPF64=E=new Float64Array(n),t=Rr.l,I.unshift(t),function(){if(D--,u.monitorRunDependencies?.(D),0==D&&(null!==$&&(clearInterval($),$=null),H)){var r=H;H=null,r()}}(),Rr}if(D++,u.monitorRunDependencies?.(D),u.instantiateWasm)try{return u.instantiateWasm(o,i)}catch(r){g(`Module.instantiateWasm callback failed with error: ${r}`),t(r)}return(r=y,e=j,n=o,a=function(r){i(r.instance)},r||"function"!=typeof WebAssembly.instantiateStreaming||B(e)||O(e)||p||"function"!=typeof fetch?L(e,n,a):fetch(e,{credentials:"same-origin"}).then(r=>WebAssembly.instantiateStreaming(r,n).then(a,function(r){return g(`wasm streaming compile failed: ${r}`),g("falling back to ArrayBuffer instantiation"),L(e,n,a)}))).catch(t),{}}(),Wr=(u._motionDetection=(r,e,n,t,a,o,i,s,f,c)=>(u._motionDetection=Rr.m)(r,e,n,t,a,o,i,s,f,c),u._main=(r,e)=>(Wr=u._main=Rr.n)(r,e)),Er=u._malloc=r=>(Er=u._malloc=Rr.p)(r),Sr=u._free=r=>(Sr=u._free=Rr.q)(r),Fr=r=>(Fr=Rr.r)(r),Ir=r=>(Ir=Rr.s)(r),kr=()=>(kr=Rr.t)();function Ur(){var r,e,n=Wr;try{var t=n(0,0);return w=r=t,w=e=r,J||(u.onExit?.(e),S=!0),c(e,new z(e)),t}catch(r){return(r=>{if(r instanceof z||"unwind"==r)return w;c(1,r)})(r)}}function _r(){function r(){Tr||(Tr=!0,u.calledRun=!0,S||(N(I),N(k),n(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),xr&&Ur(),function(){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;)x(u.postRun.shift());N(U)}()))}D>0||(function(){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)_(u.preRun.shift());N(F)}(),D>0||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),r()},1)):r()))}if(u.ccall=Cr,u.cwrap=(r,e,n,t)=>{var a=!n||n.every(r=>"number"===r||"boolean"===r);return"string"!==e&&a&&!t?Ar(r):(...t)=>Cr(r,e,n,t)},H=function r(){Tr||_r(),Tr||(H=r)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();var xr=!0;return u.noInitialRun&&(xr=!1),_r(),s}})();"object"==typeof exports&&"object"==typeof module?module.exports=createMotionDetectionModule:"function"==typeof define&&define.amd&&define([],()=>createMotionDetectionModule);